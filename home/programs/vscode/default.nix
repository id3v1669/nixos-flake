{ config, lib, pkgs, ... }: { 
  #nixpkgs.config.over-vscode.commandLineArgs = "--ozone-platform=wayland --enable-features=WaylandWindowDecorations";
  programs.vscode = {
    enable = true;
    package = pkgs.vscode-fhs.overrideAttrs(oldAttrs: rec {                           # vscode overlay as official package is not up to date
            name = "vscode";
            version = "1.85.0";
            src = pkgs.fetchurl {
              name = "code_x64_${version}.tar.gz";
              url = "https://update.code.visualstudio.com/${version}/linux-x64/stable";
              hash = "sha256-ri5t3CLDLn+GX6oGoA0XEZQdzx2ykHlMbtZZ1aFBOXc=";
            };
          });
    enableUpdateCheck = true;
    enableExtensionUpdateCheck = true;
    userSettings = {
      "window.titleBarStyle" = "custom";
      "telemetry.telemetryLevel" = "off";
      "window.autoDetectColorScheme" = false;
      "editor.tokenColorCustomizations" = {
        "comments" = "#${config.colorScheme.colors.base05}";
      };
      "workbench.colorCustomizations" = {
    "foreground" = "#${config.colorScheme.colors.base05}";
    "focusBorder" = "#${config.colorScheme.colors.base0D}";
    "selection.background" = "#${config.colorScheme.colors.base04}";
    "scrollbar.shadow" = "#${config.colorScheme.colors.base00}";
    "activityBar.foreground" = "#${config.colorScheme.colors.base05}";
    "activityBar.background" = "#${config.colorScheme.colors.base00}";
    "activityBar.inactiveForeground" = "#${config.colorScheme.colors.base05}5a";
    "activityBarBadge.foreground" = "#${config.colorScheme.colors.base00}";
    "activityBarBadge.background" = "#${config.colorScheme.colors.base0D}";
    "sideBar.background" = "#${config.colorScheme.colors.base01}";
    "sideBar.foreground" = "#${config.colorScheme.colors.base05}";
    "sideBarSectionHeader.background" = "#00000000";
    "sideBarSectionHeader.foreground" = "#${config.colorScheme.colors.base05}";

    "sideBarTitle.foreground" = "#${config.colorScheme.colors.base05}";
    "list.inactiveSelectionBackground" = "#${config.colorScheme.colors.base00}";
    "list.inactiveSelectionForeground" = "#${config.colorScheme.colors.base05}";
    "list.hoverBackground" = "#${config.colorScheme.colors.base00}";
    "list.hoverForeground" = "#${config.colorScheme.colors.base05}";
    "list.activeSelectionBackground" = "#${config.colorScheme.colors.base04}";
    "list.activeSelectionForeground" = "#${config.colorScheme.colors.base05}";
    "tree.indentGuidesStroke" = "#${config.colorScheme.colors.base07}";
    "list.dropBackground" = "#${config.colorScheme.colors.base00}";
    "list.highlightForeground" = "#${config.colorScheme.colors.base0D}";
    "list.focusBackground" = "#${config.colorScheme.colors.base03}";
    "list.focusForeground" = "#${config.colorScheme.colors.base05}";
    "listFilterWidget.background" = "#${config.colorScheme.colors.base03}";
    "listFilterWidget.outline" = "#00000000";
    "listFilterWidget.noMatchesOutline" = "#${config.colorScheme.colors.base08}";
    "statusBar.foreground" = "#${config.colorScheme.colors.base05}";
    "statusBar.background" = "#${config.colorScheme.colors.base02}";
    "statusBarItem.hoverBackground" = "#ffffff1f";
    "statusBar.debuggingBackground" = "#${config.colorScheme.colors.base08}";
    "statusBar.debuggingForeground" = "#${config.colorScheme.colors.base03}";
    "statusBar.noFolderBackground" = "#${config.colorScheme.colors.base0E}";
    "statusBar.noFolderForeground" = "#${config.colorScheme.colors.base03}";
    "statusBarItem.remoteBackground" = "#${config.colorScheme.colors.base0B}";
    "statusBarItem.remoteForeground" = "#${config.colorScheme.colors.base03}";
    "titleBar.activeBackground" = "#${config.colorScheme.colors.base00}";
    "titleBar.activeForeground" = "#${config.colorScheme.colors.base05}";
    "titleBar.inactiveBackground" = "#${config.colorScheme.colors.base00}91";
    "titleBar.inactiveForeground" = "#${config.colorScheme.colors.base05}80";
    "titleBar.border" = "#00000000";
    "menubar.selectionForeground" = "#${config.colorScheme.colors.base05}";
    "menubar.selectionBackground" = "#${config.colorScheme.colors.base03}";
    "menu.foreground" = "#${config.colorScheme.colors.base05}";
    "menu.background" = "#${config.colorScheme.colors.base00}";
    "menu.selectionForeground" = "#${config.colorScheme.colors.base05}";
    "menu.selectionBackground" = "#${config.colorScheme.colors.base04}";
    "menu.selectionBorder" = "#00000000";
    "menu.separatorBackground" = "#${config.colorScheme.colors.base04}";
    "menu.border" = "#00000085";
    "button.background" = "#${config.colorScheme.colors.base04}";
    "button.foreground" = "#${config.colorScheme.colors.base05}";
    "button.hoverBackground" = "#${config.colorScheme.colors.base03}";
    "button.secondaryForeground" = "#${config.colorScheme.colors.base05}";
    "button.secondaryBackground" = "#${config.colorScheme.colors.base03}";
    "button.secondaryHoverBackground" = "#${config.colorScheme.colors.base00}";
    "input.background" = "#${config.colorScheme.colors.base02}";
    "input.border" = "#00000000";
    "input.foreground" = "#${config.colorScheme.colors.base05}";
    "inputOption.activeBackground" = "#${config.colorScheme.colors.base0D}26";
    "inputOption.activeBorder" = "#${config.colorScheme.colors.base0D}00";
    "inputOption.activeForeground" = "#${config.colorScheme.colors.base05}";
    "input.placeholderForeground" = "#${config.colorScheme.colors.base05}70";
    "textLink.foreground" = "#${config.colorScheme.colors.base0D}";
    "editor.background" = "#${config.colorScheme.colors.base00}";
    "editor.foreground" = "#${config.colorScheme.colors.base05}";
    "editorLineNumber.foreground" = "#${config.colorScheme.colors.base05}";
    "editorCursor.foreground" = "#${config.colorScheme.colors.base06}";
    "editorCursor.background" = "#${config.colorScheme.colors.base00}";
    "editor.selectionBackground" = "#${config.colorScheme.colors.base04}";
    "editor.inactiveSelectionBackground" = "#FFFFFF20";
    "editorWhitespace.foreground" = "#${config.colorScheme.colors.base05}18";
    "editor.selectionHighlightBackground" = "#${config.colorScheme.colors.base05}5e";
    "editor.selectionHighlightBorder" = "#${config.colorScheme.colors.base07}30";
    "editor.findMatchBackground" = "#${config.colorScheme.colors.base04}";
    "editor.findMatchBorder" = "#${config.colorScheme.colors.base0D}6a";
    "editor.findMatchHighlightBackground" = "#${config.colorScheme.colors.base09}5e";
    "editor.findMatchHighlightBorder" = "#ffffff00";
    "editor.findRangeHighlightBackground" = "#${config.colorScheme.colors.base04}48";
    "editor.findRangeHighlightBorder" = "#ffffff00";
    "editor.rangeHighlightBackground" = "#${config.colorScheme.colors.base0D}3c";
    "editor.rangeHighlightBorder" = "#ffffff00";
    "editor.hoverHighlightBackground" = "#${config.colorScheme.colors.base0D}3c";
    "editor.wordHighlightStrongBackground" = "#${config.colorScheme.colors.base04}";
    "editor.wordHighlightBackground" = "#575757b8";
    "editor.lineHighlightBackground" = "#ffffff0A";
    "editor.lineHighlightBorder" = "#${config.colorScheme.colors.base00}";
    "editorLineNumber.activeForeground" = "#${config.colorScheme.colors.base0B}";
    "editorLink.activeForeground" = "#${config.colorScheme.colors.base0D}";
    "editorIndentGuide.background" = "#${config.colorScheme.colors.base03}";
    "editorIndentGuide.activeBackground" = "#${config.colorScheme.colors.base04}";
    "editorRuler.foreground" = "#${config.colorScheme.colors.base04}";
    "editorBracketMatch.background" = "#${config.colorScheme.colors.base05}14";
    "editorBracketMatch.border" = "#${config.colorScheme.colors.base05}";
    "editor.foldBackground" = "#${config.colorScheme.colors.base0D}42";
    "editorOverviewRuler.background" = "#${config.colorScheme.colors.base01}";
    "editorOverviewRuler.border" = "#FFFFFF0F";
    "editorError.foreground" = "#${config.colorScheme.colors.base08}";
    "editorError.background" = "#B73A3400";
    "editorError.border" = "#ffffff00";
    "editorWarning.foreground" = "#${config.colorScheme.colors.base0A}";
    "editorWarning.background" = "#A9904000";
    "editorWarning.border" = "#ffffff00";
    "editorInfo.foreground" = "#${config.colorScheme.colors.base0D}";
    "editorInfo.background" = "#4490BF00";
    "editorInfo.border" = "#4490BF00";
    "editorGutter.background" = "#${config.colorScheme.colors.base00}";
    "editorGutter.modifiedBackground" = "#${config.colorScheme.colors.base07}";
    "editorGutter.addedBackground" = "#${config.colorScheme.colors.base0B}";
    "editorGutter.deletedBackground" = "#${config.colorScheme.colors.base08}";
    "editorGutter.foldingControlForeground" = "#${config.colorScheme.colors.base05}";
    "editorCodeLens.foreground" = "#${config.colorScheme.colors.base05}";
    "editorGroup.border" = "#${config.colorScheme.colors.base04}";
    "diffEditor.insertedTextBackground" = "#${config.colorScheme.colors.base0B}18";
    "diffEditor.removedTextBackground" = "#${config.colorScheme.colors.base08}1c";
    "diffEditor.border" = "#${config.colorScheme.colors.base04}";
    "panel.background" = "#${config.colorScheme.colors.base00}";
    "panel.border" = "#${config.colorScheme.colors.base04}";
    "panelTitle.activeBorder" = "#${config.colorScheme.colors.base05}";
    "panelTitle.activeForeground" = "#${config.colorScheme.colors.base05}";
    "panelTitle.inactiveForeground" = "#${config.colorScheme.colors.base05}ad";
    "badge.background" = "#${config.colorScheme.colors.base03}";
    "badge.foreground" = "#${config.colorScheme.colors.base05}";
    "terminal.foreground" = "#${config.colorScheme.colors.base05}";
    "terminal.selectionBackground" = "#${config.colorScheme.colors.base04}34";
    "terminalCursor.background" = "#${config.colorScheme.colors.base00}";
    "terminalCursor.foreground" = "#${config.colorScheme.colors.base06}";
    "terminal.border" = "#${config.colorScheme.colors.base04}";
    "terminal.ansiBlack" = "#${config.colorScheme.colors.base07}";
    "terminal.ansiBlue" = "#${config.colorScheme.colors.base0D}";
    "terminal.ansiBrightBlack" = "#${config.colorScheme.colors.base05}";
    "terminal.ansiBrightBlue" = "#${config.colorScheme.colors.base0D}";
    "terminal.ansiBrightCyan" = "#${config.colorScheme.colors.base07}";
    "terminal.ansiBrightGreen" = "#${config.colorScheme.colors.base0B}";
    "terminal.ansiBrightMagenta" = "#${config.colorScheme.colors.base0F}";
    "terminal.ansiBrightRed" = "#${config.colorScheme.colors.base08}";
    "terminal.ansiBrightWhite" = "#${config.colorScheme.colors.base05}";
    "terminal.ansiBrightYellow" = "#${config.colorScheme.colors.base0A}";
    "terminal.ansiCyan" = "#${config.colorScheme.colors.base07}";
    "terminal.ansiGreen" = "#${config.colorScheme.colors.base0B}";
    "terminal.ansiMagenta" = "#${config.colorScheme.colors.base0F}";
    "terminal.ansiRed" = "#${config.colorScheme.colors.base08}";
    "terminal.ansiWhite" = "#${config.colorScheme.colors.base05}";
    "terminal.ansiYellow" = "#${config.colorScheme.colors.base0A}";
    "breadcrumb.background" = "#${config.colorScheme.colors.base00}";
    "breadcrumb.foreground" = "#${config.colorScheme.colors.base05}cd";
    "breadcrumb.focusForeground" = "#${config.colorScheme.colors.base05}";
    "editorGroupHeader.tabsBackground" = "#${config.colorScheme.colors.base00}";
    "tab.activeForeground" = "#${config.colorScheme.colors.base05}";
    "tab.border" = "#${config.colorScheme.colors.base01}";
    "tab.activeBackground" = "#${config.colorScheme.colors.base00}";
    "tab.activeBorder" = "#00000000";
    "tab.activeBorderTop" = "#00000000";
    "tab.inactiveBackground" = "#${config.colorScheme.colors.base01}";
    "tab.inactiveForeground" = "#${config.colorScheme.colors.base07}";
    "scrollbarSlider.background" = "#${config.colorScheme.colors.base04}7e";
    "scrollbarSlider.hoverBackground" = "#${config.colorScheme.colors.base07}";
    "scrollbarSlider.activeBackground" = "#${config.colorScheme.colors.base04}66";
    "progressBar.background" = "#${config.colorScheme.colors.base0D}";
    "widget.shadow" = "#00000080";
    "editorWidget.foreground" = "#${config.colorScheme.colors.base05}";
    "editorWidget.background" = "#${config.colorScheme.colors.base00}";
    "editorWidget.resizeBorder" = "#${config.colorScheme.colors.base04}";
    "pickerGroup.border" = "#${config.colorScheme.colors.base0D}";
    "pickerGroup.foreground" = "#${config.colorScheme.colors.base0D}";
    "debugToolBar.background" = "#${config.colorScheme.colors.base03}";
    "debugToolBar.border" = "#${config.colorScheme.colors.base04}";
    "notifications.foreground" = "#${config.colorScheme.colors.base05}";
    "notifications.background" = "#${config.colorScheme.colors.base03}";
    "notificationToast.border" = "#${config.colorScheme.colors.base04}";
    "notificationsErrorIcon.foreground" = "#${config.colorScheme.colors.base08}";
    "notificationsWarningIcon.foreground" = "#${config.colorScheme.colors.base0A}";
    "notificationsInfoIcon.foreground" = "#${config.colorScheme.colors.base0D}";
    "notificationCenter.border" = "#${config.colorScheme.colors.base04}";
    "notificationCenterHeader.foreground" = "#${config.colorScheme.colors.base05}";
    "notificationCenterHeader.background" = "#${config.colorScheme.colors.base00}";
    "notifications.border" = "#${config.colorScheme.colors.base03}";
    "gitDecoration.addedResourceForeground" = "#${config.colorScheme.colors.base0B}";
    "gitDecoration.conflictingResourceForeground" = "#${config.colorScheme.colors.base0E}";
    "gitDecoration.deletedResourceForeground" = "#${config.colorScheme.colors.base08}";
    "gitDecoration.ignoredResourceForeground" = "#${config.colorScheme.colors.base07}";
    "gitDecoration.modifiedResourceForeground" = "#${config.colorScheme.colors.base0A}";
    "gitDecoration.stageDeletedResourceForeground" = "#${config.colorScheme.colors.base08}";
    "gitDecoration.stageModifiedResourceForeground" = "#${config.colorScheme.colors.base0A}";
    "gitDecoration.submoduleResourceForeground" = "#${config.colorScheme.colors.base0D}";
    "gitDecoration.untrackedResourceForeground" = "#${config.colorScheme.colors.base0B}";
    "editorMarkerNavigation.background" = "#${config.colorScheme.colors.base03}";
    "editorMarkerNavigationError.background" = "#${config.colorScheme.colors.base08}";
    "editorMarkerNavigationWarning.background" = "#${config.colorScheme.colors.base0A}";
    "editorMarkerNavigationInfo.background" = "#${config.colorScheme.colors.base0D}";
    "merge.currentHeaderBackground" = "#${config.colorScheme.colors.base0C}";
    "merge.currentContentBackground" = "#27403B";
    "merge.incomingHeaderBackground" = "#395F8F";
    "merge.incomingContentBackground" = "#243A5E";
    "merge.commonHeaderBackground" = "#${config.colorScheme.colors.base04}";
    "merge.commonContentBackground" = "#${config.colorScheme.colors.base03}";
    "editorSuggestWidget.background" = "#${config.colorScheme.colors.base03}";
    "editorSuggestWidget.border" = "#${config.colorScheme.colors.base04}";
    "editorSuggestWidget.foreground" = "#${config.colorScheme.colors.base05}";
    "editorSuggestWidget.highlightForeground" = "#${config.colorScheme.colors.base0D}";
    "editorSuggestWidget.selectedBackground" = "#${config.colorScheme.colors.base04}";
    "editorHoverWidget.foreground" = "#${config.colorScheme.colors.base05}";
    "editorHoverWidget.background" = "#${config.colorScheme.colors.base03}";
    "editorHoverWidget.border" = "#${config.colorScheme.colors.base04}";
    "peekView.border" = "#${config.colorScheme.colors.base0D}";
    "peekViewEditor.background" = "#${config.colorScheme.colors.base03}";
    "peekViewEditorGutter.background" = "#${config.colorScheme.colors.base03}";
    "peekViewEditor.matchHighlightBackground" = "#${config.colorScheme.colors.base09}40";
    "peekViewEditor.matchHighlightBorder" = "#${config.colorScheme.colors.base09}";
    "peekViewResult.background" = "#${config.colorScheme.colors.base03}";
    "peekViewResult.fileForeground" = "#${config.colorScheme.colors.base05}";
    "peekViewResult.lineForeground" = "#${config.colorScheme.colors.base05}";
    "peekViewResult.matchHighlightBackground" = "#${config.colorScheme.colors.base09}40";
    "peekViewResult.selectionBackground" = "#${config.colorScheme.colors.base04}";
    "peekViewResult.selectionForeground" = "#${config.colorScheme.colors.base05}";
    "peekViewTitle.background" = "#${config.colorScheme.colors.base00}";
    "peekViewTitleDescription.foreground" = "#${config.colorScheme.colors.base06}b3";
    "peekViewTitleLabel.foreground" = "#${config.colorScheme.colors.base05}";
    "icon.foreground" = "#${config.colorScheme.colors.base05}";
    "checkbox.background" = "#${config.colorScheme.colors.base02}";
    "checkbox.foreground" = "#${config.colorScheme.colors.base05}";
    "checkbox.border" = "#00000000";
    "dropdown.background" = "#${config.colorScheme.colors.base02}";
    "dropdown.foreground" = "#${config.colorScheme.colors.base05}";
    "dropdown.border" = "#00000000";
    "disabledForeground" = "#${config.colorScheme.colors.base07}";
    "minimapGutter.addedBackground" = "#${config.colorScheme.colors.base0B}";
    "minimapGutter.modifiedBackground" = "#${config.colorScheme.colors.base07}";
    "minimapGutter.deletedBackground" = "#${config.colorScheme.colors.base08}";
    "minimap.findMatchHighlight" = "#${config.colorScheme.colors.base04}";
    "minimap.selectionHighlight" = "#${config.colorScheme.colors.base04}";
    "minimap.errorHighlight" = "#${config.colorScheme.colors.base08}";
    "minimap.warningHighlight" = "#${config.colorScheme.colors.base0A}";
    "minimap.background" = "#${config.colorScheme.colors.base00}";
    "sideBar.dropBackground" = "#${config.colorScheme.colors.base01}";
    "editorGroup.emptyBackground" = "#${config.colorScheme.colors.base00}";
    "panelSection.border" = "#${config.colorScheme.colors.base04}";
    "statusBarItem.activeBackground" = "#FFFFFF25";
    "settings.headerForeground" = "#${config.colorScheme.colors.base05}";
    "settings.focusedRowBackground" = "#ffffff07";
    "walkThrough.embeddedEditorBackground" = "#00000050";
    "breadcrumb.activeSelectionForeground" = "#${config.colorScheme.colors.base05}";
    "editorGutter.commentRangeForeground" = "#${config.colorScheme.colors.base05}";
    "debugExceptionWidget.background" = "#${config.colorScheme.colors.base03}";
    "debugExceptionWidget.border" = "#${config.colorScheme.colors.base04}";
    "list.warningForeground" = "#${config.colorScheme.colors.base0A}";
    "editorBracketHighlight.foreground1" = "#${config.colorScheme.colors.base08}";
    "editorBracketHighlight.foreground2" = "#${config.colorScheme.colors.base09}";
    "editorBracketHighlight.foreground3" = "#${config.colorScheme.colors.base0A}";
    "editorBracketHighlight.foreground4" = "#${config.colorScheme.colors.base0B}";
    "editorBracketHighlight.foreground5" = "#85c1dc";
    "editorBracketHighlight.foreground6" = "#${config.colorScheme.colors.base0E}";
    "editorBracketHighlight.unexpectedBracket.foreground" = "#${config.colorScheme.colors.base0F}";
      };
    };
    extensions = with pkgs.vscode-extensions; [
      github.copilot
      mads-hartmann.bash-ide-vscode
      jnoortheen.nix-ide
      skyapps.fish-vscode
      ms-dotnettools.csharp
      dotjoshjohnson.xml
      #ms-python.python
    ];
  };
}
